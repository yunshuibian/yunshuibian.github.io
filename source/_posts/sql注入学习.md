---
title: sql注入学习
date: 2025-01-28 12:07:55
tags:
categories:
  学习
---

# sql注入的类型

sql注入按照查询字段分为字符型和数字型

**判断sql注入的类型可以输入and 1=1，和and 1 =2因为1和2都是字符串所以显示正常的是字符型注入**

**也可以使用减法进行判断字符型减法不做改变而数字型会改变**

## **字符型**

输入的参数为字符串

## 数字型

输入的参数为整形

#  注入方法

union注入，报错注入，布尔注入，时间注入

注入点：一个能够进行注入的地方如input the id就是注入点

## **判断闭合方式**

字符型需要闭合符’,数字型则不需要闭合符来闭合

闭合方式‘    “   ’）  ”）

使用‘进行闭合报错就说明为’闭合

## 闭合的作用

![image-20240929002216941](sql注入学习/image-20240929002216941.png)

判断原来查询的列数 ，union查询前后列数需要一致 ，group by 可以进行查寻列数

将id改为-1查询回显位

## 注入顺序

1 查找注入点

2 判断是字符型还是数字型注入 and 1=1 1=2 /3-1

3 如果是字符型，找到闭合方式

4 半段查询列数，group by     order by

5 查询回显位置，-1

## union 注入

![image-20241005095632900](sql注入学习/image-20241005095632900.png)

利用回显位置datebase（）拿到库名

![image-20241005100541709](sql注入学习/image-20241005100541709.png)

![image-20241005100812747](sql注入学习/image-20241005100812747.png)





![image-20241005193220347](sql注入学习/image-20241005193220347.png)

## 数字型注入

![image-20241005193402328](sql注入学习/image-20241005193402328.png)

# 报错注入



![image-20241006145156921](sql注入学习/image-20241006145156921.png)

![image-20241006145406562](sql注入学习/image-20241006145406562.png)

## extract报错注入

extractvalue()包含两个参数

第一个参数是xml文档对象名称，第二个参数是路径

<img src="sql注入学习/image-20241006212907210.png" alt="image-20241006212907210" style="zoom: 33%;" />



![image-20241012100356103](sql注入学习/image-20241012100356103.png)

concat用于拼接，concat（）也需要两个参数其中第一个参数可以是’~‘

或者0x7e，第二个参数为（）中的执行命令如select database()

extractbalue报错注入查询语句

![image-20241012150658197](sql注入学习/image-20241012150658197.png)

![image-20241012151924896](sql注入学习/image-20241012151924896.png)

报错注入没此返回32个字符解决方法

![image-20241012152814755](sql注入学习/image-20241012152814755.png)

## updatexml报错注入

![image-20241012154000120](sql注入学习/image-20241012154000120.png)

注入查询（）之中的语句一样

![image-20241012154147167](sql注入学习/image-20241012154147167.png)

![image-20241012154738251](sql注入学习/image-20241012154738251.png)

## floor报错注入

floor报错所需要的函数，以及完整的命令

![image-20241012155404285](sql注入学习/image-20241012155404285.png)

rand（）函数可以进行判断表的行数

![image-20241012155724431](sql注入学习/image-20241012155724431.png)

concat_ws()函数的使用

![image-20241012160455486](sql注入学习/image-20241012160455486.png)

group by自句即为分组语句常用于结合统计

as别名

count（）汇总统计数量

limit这里用于显示指定行数

![image-20241102171715572](sql注入学习/image-20241102171715572.png)

floor报错的原因是将concat_ws中进行统计时group中的键值出现冲突所导致的

![image-20241102172244240](sql注入学习/image-20241102172244240.png)

报错过程如上图，会出现键值冲突

# sql盲注

## 布尔盲注

盲注分为布尔盲注，时间盲注，报错盲注

当页面不存在回显时，存在真假判断时使用盲注

![image-20241102181809525](sql注入学习/image-20241102181809525.png)

布尔盲注的判断方法

![image-20241102182924273](sql注入学习/image-20241102182924273.png)

布尔盲注判断闭合方式

ascii()该函数是将字符变成一个对应的数字

![image-20241108173440751](sql注入学习/image-20241108173440751.png)

函数substr（）在布尔盲注中可以进行使用

在布尔盲注中将所写的查询语句放入ascii（）中进行判断

## 时间盲注

![image-20241108163907348](sql注入学习/image-20241108163907348.png)

时间盲注关键函数为sleep（）

![image-20241110201326135](sql注入学习/image-20241110201326135.png)

需要用到if条件进行判断，括号中第二个是反应为真时触发，第三个反应为假时触发

![image-20241110203213764](sql注入学习/image-20241110203213764.png)

其余语句和之前的相同

## DNSlog注入

使用dnslog注入需要对服务器的文件有读写权限

![](sql注入学习/image-20241110205051565.png)

该指令可以读取其文件中的内容

![image-20241110205453354](sql注入学习/image-20241110205453354.png)

所需要用到这两个网站

dnslog注入输入盲注的一种可以使用时间盲注的方法进行判断



# sql注入的文件上传

先判断是否具有文件读写权限

使用into outflie指令必须知道一个完整的路径

![image-20241110203839847](sql注入学习/image-20241110203839847.png)

# POST提交

与get提交不同post提交没有缓存并且无法成为标签进行收藏，get提交有长度要求

最长2048个字符，post提交还可以用二进制数据

![image-20241110212510663](sql注入学习/image-20241110212510663.png)

#使用来将后面代码注释掉，可以不用去输入密码。 admin‘后跟着的

1=1永远为真

![image-20241110212807632](sql注入学习/image-20241110212807632.png)

其中注入语法与前面get注入相同并未进行改变

## post提交爆错注入

![image-20241110213232332](sql注入学习/image-20241110213232332.png)

与get提交相似其语句与报错注入相同

![image-20241110213310341](sql注入学习/image-20241110213310341.png)

## post提交中的盲注

盲注的语法与前面get传参也是相同的

![image-20241110213719541](sql注入学习/image-20241110213719541.png)

# sql注入过滤



![image-20241112002434083](sql注入学习/image-20241112002434083.png)

注释符号的作用

![image-20241112003701231](sql注入学习/image-20241112003701231.png)

绕过and和or的方法

绕过空格

![image-20241112004220309](sql注入学习/image-20241112004220309.png)

